### Алгоритмы балансировки нагрузки

Существует несколько алгоритмов балансировки нагрузки, каждый из которых имеет свои особенности и недостатки. Ниже перечислены некоторые из них:

1. **Раунд-робин (Round Robin):** Здесь запросы распределяются между серверами по круговому принципу. Каждый сервер получает равное количество запросов до тех пор, пока все серверы не получат одинаковое количество. Достоинством этого алгоритма является простота реализации. Однако недостатком является отсутствие учета нагрузки на сервера, что может привести к перегрузке некоторых из них. Главная проблема этого подхода — нерациональное распределение ресурсов. Даже если все машины обладают примерно одинаковыми характеристиками, реальная нагрузка будет сильно различаться в пуле.

2. **Взвешенный раунд-робин (Weighted Round Robin):**  В этом алгоритме каждому серверу присваивается вес, который определяет его способность обрабатывать запросы. Серверы с более высоким весом получают большую долю запросов. Достоинством этого алгоритма является возможность учета различной производительности серверов. Недостатком является сложность настройки правильных весов для каждого сервера. Это не идеальный подход, но он значительно лучше обычного Round Robin.

3. **Использование IP-адреса (IP Hash):** В этом алгоритме запросы распределяются на основе IP-адреса клиента. Каждый IP-адрес клиента хешируется, и результат используется для выбора сервера. Достоинством этого алгоритма является возможность сохранения сессии пользователя на одном сервере. Недостатком является неравномерное распределение запросов в случае, если IP-адресы клиентов не равномерно распределены.

4. **Наименьшая загрузка (Least Connections):** Least Connections — это изящное и эффективное решение, которое позволяет адекватно распределять нагрузку по серверам с приблизительно одинаковыми параметрами. В этом алгоритме запросы отправляются на сервер с наименьшим количеством активных соединений. Достоинством этого алгоритма является равномерное распределение нагрузки между серверами. Недостатком является сложность определения количества активных соединений на каждом сервере.

5. **Адаптивный (Adaptive):** В этом алгоритме выбор сервера основывается на текущей нагрузке каждого сервера. Достоинством этого алгоритма является динамическое распределение нагрузки в зависимости от производительности серверов. Недостатком является сложность реализации и настройки.

6. **Sticky Sessions:** В этом алгоритме запросы распределяются в зависимости от IP-адреса пользователя. Sticky Sessions предполагает, что обращения от одного клиента будут направляться на один и тот же сервер, а не скакать в пуле. Клиент сменит сервер только в том случае, если ранее использовавшийся больше не доступен.  

Плюсы: никаких изменений в приложении не требуется.
Лучше использует локальные кэши оперативной памяти (например, просматривает профиль пользователя один раз, кэширует его и может повторно использовать при последующих посещениях того же пользователя)
Минусы: 
- Если сервер выходит из строя, сеанс теряется.
- В зависимости от "липкой" реализации в вашем балансировщике нагрузки может привести к неравномерной нагрузке на одни серверы по сравнению с другими.
- Подключение нового сервера к сети не приводит к немедленной загрузке нового сервера. Если у вас установлена система динамической балансировки нагрузки для устранения скачков, "прилипание" может замедлить вашу способность быстро реагировать на скачок.
- Если у вас относительно мало пользователей, но трафик одного пользователя может перегружать один сервер, то "липкость" может снизить время отклика конечного пользователя, поскольку вы неравномерно распределяете нагрузку одного пользователя по серверам.